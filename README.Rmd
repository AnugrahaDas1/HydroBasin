
<!-- README.md is generated from README.Rmd. Run `devtools::build_readme()` after edits. -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse   = TRUE,
  comment    = "#>",
  fig.path   = "man/figures/README-",
  out.width  = "100%",
  warning    = FALSE,
  message    = FALSE
)
```

# HydroBasin <img src="man/figures/logo.png" align="right" height="120" />

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html)
[![R-CMD-check](https://github.com/AnugrahaDas1/HydroBasin/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/AnugrahaDas1/HydroBasin/actions/workflows/R-CMD-check.yaml)
[![CRAN status](https://www.r-pkg.org/badges/version/HydroBasin)](https://CRAN.R-project.org/package=HydroBasin)
<!-- badges: end -->

`HydroBasin` automates two labor‑intensive hydrology tasks:

1. **Watershed delineation** from a study‑area polygon or shapefile using
   WhiteboxTools via the *SAiVE* wrapper;
2. **Monthly water‑balance / run‑off** estimation from TerraClim climate grids
   (precipitation and actual evapotranspiration).

Developed as the final project for the “Introduction to Programming” course in
the *Master of Earth Observation and Geoanalysis (EAGLE)* program,
University of Würzburg.

---

## Installation

### CRAN (coming soon)
```r
install.packages("HydroBasin")
```

### Development (GitHub)
```r
# install.packages("devtools")
remotes::install_github("AnugrahaDas1/HydroBasin")
```

---

## Quick start

```{r, eval = FALSE}
library(HydroBasin)

# path to demo AOI shipped with the package
shp <- system.file("extdata/aoi_example.shp", package = "HydroBasin")

# 1. Delineate the basin (interactive outlet picker pops up)
basin <- delineate_basin(shp)

# 2. Calculate 2020 water balance & run‑off (returns tibble + plot)
runoff <- calculate_runoff(basin,
                           start_date  = "2020-01-01",
                           end_date    = "2020-12-31",
                           return_plot = TRUE)

runoff$plot    # ggplot2 object
```

<details>
<summary>First rows of the resulting tibble</summary>

```{r, echo = FALSE}
if (interactive()) {
  library(HydroBasin)
  shp <- system.file("extdata/aoi_example.shp", package = "HydroBasin")
  basin <- delineate_basin(shp, quiet = TRUE, out_dir = tempdir())
  tbl <- calculate_runoff(basin, "2020-01-01", "2020-02-28", quiet = TRUE)
  print(head(tbl))
}
```

</details>

---

## Learning more

* **Vignette** – `vignette("HydroBasin-workflow")` walks through a complete
  pipeline using the example data.
* **Function reference** – <https://AnugrahaDas1.github.io/HydroBasin/>
  (pkgdown site, if enabled).

---

## Citation

If you use **HydroBasin** in academic work, please cite:

> Das, A. (2025). *HydroBasin: Toolbox for Automated Basin Water‑Balance
> Analysis* (v0.9.0). <https://github.com/AnugrahaDas1/HydroBasin>

---

## Contributing / Issues

Bug reports and pull requests are welcome on
[GitHub Issues](https://github.com/AnugrahaDas1/HydroBasin/issues).
Please follow the tidyverse code style and write unit tests for new features.

